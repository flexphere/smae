<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/font-awesome.min.css"/>
    <link rel="stylesheet" href="css/daterangepicker.css">
    <link rel="stylesheet" href="css/popup.css"/>
</head>
<body id="app">

  <div class="container-fluid">

    <div class="row">
      <div class="col-xs-12">
        <form class="search form-inline">
          <div class="form-group">
            <input class="form-control placeholder" type="text" id="daterange" data-mask="0000/00/00〜0000/00/00" placeholder="____/__/__〜____/__/__" />
          </div>
          <button class="btn btn-satr" type="submit" v-on:click.prevent="analyze"><i class="fa fa-search"></i> Analyze</button>
        </form>
      </div>
    </div><!-- /row search -->

    <div class="row" v-if="!status">
      <div class="col-xs-12">
        {{message}}
      </div>
    </div>

    <div class="row" v-if="result">
      <div class="col-xs-12">

        <hr>

        <table class="table table-collapsed">
          <thead>
            <tr>
              <th rowspan="2">件名</th>
              <template v-for="colname in result.header">
              <th v-if="$index % 2 === 0">{{colname}}</th>
              </template>
            </tr>
            <tr>
              <template v-for="colname in result.header">
              <th v-if="$index % 2 !== 0">{{colname}}</th>
              </template>
            </tr>
          </thead>
          <tbody>
            <template v-for="(subject, data) in result.body">
              <tr v-bind:class="{'odd':$index % 2 == 0}">
                <td rowspan="2">{{subject}}</td>
                <template v-for="value in data.stats">
                <td v-if="$index % 2 === 0">{{value}}</td>
                </template>
              </tr>
              <tr v-bind:class="{'odd':$index % 2 == 0}">
                <template v-for="value in data.stats">
                <td v-if="$index % 2 !== 0">
                  <template v-if="$index == 1">{{value}}</template>
                  <template v-if="$index > 1">{{value / data.data.length}}%</template>
                </td>
                </template>
              </tr>
            </template>
          </tbody>
        </table>
      </div><!-- /col -->

      <div class="col-xs-12 text-right">
        <hr>
        <a id="download" class="btn btn-satr" href="#" download="test.txt" onclick="handleDownload()"><i class="fa fa-download"></i> CSV Download</a>
      </div>
    </div><!-- /row result -->

  </div><!-- /container -->



<script src="js/lib/jquery-2.1.1.min.js"></script>
<script src="js/lib/jquery-mask.min.js"></script>
<script src="js/lib/moment.min.js"></script>
<script src="js/lib/bootstrap.min.js"></script>
<script src="js/lib/vue.min.js"></script>
<script src="js/popup.js"></script>
</body>
</html>
